Spring

<details>
<summary>✍️ 1. 데이터베이스 커넥션 풀에 대해서 설명해주세요.</summary>
<br>

데이터베이스 연결을 열고 닫는데 들어가는 비용과 시간을 줄이는 방법입니다.

데이터베이스에 연결하기 위해서는 드라이버를 로드하고 커넥션 객체를 생성해야는데 이때 많은 시스템 자원 소모와 시간이 발생합니다.

데이터베이스 사용을 완료하면 자원을 반납해야 하고 매번 요청할 때마다 이러한 작업을 반복하는 것은 매우 비효율적이기 때문에 커넥션 풀을 사용합니다.

커넥션 풀의 커넥션 개수가 적으면 쓰레드의 대기시간이 길어져 성능 저하가 발생하고 커넥션 개수가 증가하더라도 Disk 병목이나 컨텍스트 스위칭으로 인한 오버헤드가 발생하기 때문에 성능적인 한계가 존재합니다.

***커넥션 풀 설정***

|설정|설명|
|---|---|
|initialSize|초기 커넥션 개수 (default 10)|
|minIdle|최소한으로 유지할 커넥션 개수 (default 10)|
|maxIdle|최대한 유지할 수 있는 커넥션 개수 (default 100)|
|maxActive|동시에 사용할 수 있는 최대 커넥션 개수 (default 100)|
|maxWait|커넥션을 얻기 전 최대 대기 시간 (default 30s)|

</details>

maxActive는 initialSize 보다 크거나 같아야 합니다.

- 초기 커넥션 개수가 최대 커넥션 개수 보다 커서 논리적인 오류가 있는 설정입니다.

maxIdle과 maxActive는 동일하게 설정하는 것을 권장합니다.

- maxIdle = 5, maxActive = 10인 경우 커넥션을 5개 사용하고 있다고 가정합니다.
- 1개의 커넥션이 추가로 요청된다면 10개까지 사용 가능하므로 커넥션을 생성하고 사용이 완료되면 풀에 반환합니다.
- 이때 maxIdle이 5이므로 해당 커넥션은 close되는데 이러한 상황이 반복되면 불필요한 비용과 시간이 발생할 수 있습니다.
